// Generated by CoffeeScript 1.3.3
(function() {
  var KEYCODE_A, KEYCODE_D, KEYCODE_DOWN, KEYCODE_LEFT, KEYCODE_RIGHT, KEYCODE_S, KEYCODE_UP, KEYCODE_W, MOVE_SPEED, canvas, context, downHeld, eventHandlers, initCanvas, initGame, leftHeld, player, preloader, rightHeld, stage, tick, upHeld;

  KEYCODE_LEFT = 37;

  KEYCODE_UP = 38;

  KEYCODE_RIGHT = 39;

  KEYCODE_DOWN = 40;

  KEYCODE_A = 65;

  KEYCODE_W = 87;

  KEYCODE_D = 68;

  KEYCODE_S = 83;

  MOVE_SPEED = 7;

  canvas = void 0;

  context = void 0;

  stage = void 0;

  player = void 0;

  leftHeld = void 0;

  upHeld = void 0;

  rightHeld = void 0;

  downHeld = void 0;

  preloader = void 0;

  eventHandlers = function() {
    console.log($("#game"));
    $(document).keydown(function(event) {
      console.log("hi");
      if (!event) {
        event = window.event;
      }
      console.log("yes!" + event.keyCode);
      switch (event.keyCode) {
        case KEYCODE_LEFT:
        case KEYCODE_A:
          leftHeld = true;
          return false;
        case KEYCODE_UP:
        case KEYCODE_W:
          upHeld = true;
          return false;
        case KEYCODE_RIGHT:
        case KEYCODE_D:
          rightHeld = true;
          return false;
        case KEYCODE_DOWN:
        case KEYCODE_S:
          downHeld = true;
          return false;
      }
    });
    return $(document).keyup(function(event) {
      if (!event) {
        event = window.event;
      }
      switch (event.keyCode) {
        case KEYCODE_LEFT:
        case KEYCODE_A:
          return leftHeld = false;
        case KEYCODE_UP:
        case KEYCODE_W:
          return upHeld = false;
        case KEYCODE_RIGHT:
        case KEYCODE_D:
          return rightHeld = false;
        case KEYCODE_DOWN:
        case KEYCODE_S:
          return downHeld = false;
      }
    });
  };

  $(document).ready(function() {
    return eventHandlers();
  });

  initCanvas = function() {
    var manifest;
    canvas = $("#game")[0];
    context = canvas.getContext("2d");
    stage = new createjs.Stage(canvas);
    stage.mouseEventsEnabled = true;
    manifest = [
      {
        src: "/images/antigoliath.jpg",
        id: "player"
      }
    ];
    preloader = new createjs.PreloadJS();
    preloader.onComplete = initGame;
    return preloader.loadManifest(manifest);
  };

  initGame = function() {
    player = new createjs.Bitmap(preloader.getResult("player").result);
    player.x = canvas.width / 2;
    player.y = canvas.height / 2;
    stage.addChild(player);
    stage.update();
    return createjs.Ticker.addListener(window);
  };

  tick = function() {
    player.x -= Math.random();
    player.y -= Math.random();
    if (leftHeld) {
      player.x -= MOVE_SPEED;
    }
    if (upHeld) {
      player.y -= MOVE_SPEED;
    }
    if (rightHeld) {
      player.x += MOVE_SPEED;
    }
    if (downHeld) {
      player.y += MOVE_SPEED;
    }
    return stage.update();
  };

}).call(this);
